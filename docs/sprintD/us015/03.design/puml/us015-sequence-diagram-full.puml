@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

title Sequence Diagram - US15


actor "Employee" as Employee
participant "VisitScheduleRequestsWindow:UI" as UI
participant "AuthenticationController:AuthCTRL" as AuthCTRL
participant "VisitScheduleController:VCTRL" as VCTRL
participant "repositories\n:Repositories" as REPO
participant ":VisitScheduleRepository" as VSREPO

activate Employee

Employee -> UI : asks to view scheduled visits
activate UI

UI -> AuthCTRL: getUserEmail()
activate AuthCTRL

AuthCTRL --> UI : userEmail
deactivate AuthCTRL

UI -> VCTRL: getPendingVisitsByAgentEmail(userEmail)
activate VCTRL

VCTRL -> REPO : getVisitScheduleRepository()
activate REPO

REPO --> VCTRL: visitScheduleRepository
deactivate REPO

VCTRL -> VSREPO : getVisitSchedulesByAgentAndPeriod(userEmail, startDate, endDate)
activate VSREPO

VSREPO --> VCTRL: visitSchedules
deactivate VSREPO

VCTRL --> UI : return visitSchedules
deactivate VCTRL

UI --> Employee : displays scheduled visits
deactivate UI

Employee -> UI : asks to filter and sort scheduled visits
activate UI

UI -> VCTRL: getFilteredVisitsByAgentEmail(userEmail, filters)
activate VCTRL

VCTRL -> REPO : getVisitScheduleRepository()
activate REPO

REPO --> VCTRL: visitScheduleRepository
deactivate REPO

VCTRL -> VSREPO : getVisitSchedulesByAgentAndPeriod(userEmail, startDate, endDate)
activate VSREPO

VSREPO --> VCTRL: filteredVisitSchedules
deactivate VSREPO

VCTRL --> UI : return filteredVisitSchedules
deactivate VCTRL

UI --> Employee : displays filtered and sorted scheduled visits
deactivate UI

@enduml
